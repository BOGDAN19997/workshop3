{% extends "index.html" %}

{% block content %}


<div class="col-md-6 mx-auto">

    <!-- form card login -->
    <div class="card rounded-0">

        <div class="card-header">
            <h3 class="mb-0">Search <br>By user name and file name <br>At file editors table</h3>
        </div>
        <div class="card-body">

            <form class="form"  action = "/search" method = post >
                {{ form.hidden_tag() }}

                <div class="form-group">
                    {{ form.user_name.label }}
                    <select name="user_name">
                        <option value="None">None</option>
                        {% for name in users %}
                        <option value="{{name[0]}}">
                            {{name[0]}}
                        </option>
                        {%endfor%}
                    </select>

                </div>

                <div class="form-group">
                    {{ form.file_name.label }}
                    <select name="file_name">
                        <option value="None">None</option>
                        {% for name in files%}
                        <option value="{{name[0]}}">
                            {{name[0]}}
                        </option>
                        {%endfor%}
                    </select>
                </div>

                {{ form.submit(class_="btn btn-success") }}
            </form>
        </div>
        <!--/card-block-->
    </div>
    <!-- /form card login -->

</div>

{% if result %}
    <br><br>
    <h3>Search result</h3>

    {% if result == 'Empty search table' %}
        <h3>{{result}}</h3>
    {% else %}

    <div class="table-responsive">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">user_id</th>
                <th scope="col">user_name</th>
                <th scope="col">user_login</th>
                <th scope="col">file_id</th>
                <th scope="col">file_name</th>
                <th scope="col">file_date</th>
                <th scope="col">file_type</th>
                <th scope="col">file_context</th>
            </tr>
            </thead>
            <tbody>
            {% for row in result %}
            <tr >
                <td> {{row[0]}} </td>
                <td> {{row[1]}} </td>
                <td> {{row[2]}} </td>
                <td> {{row[3]}} </td>
                <td> {{row[4]}} </td>
                <td> {{row[5]}} </td>
                <td> {{row[6]}} </td>
                <td> {{row[7]}} </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
{% endif %}



{% endblock %}